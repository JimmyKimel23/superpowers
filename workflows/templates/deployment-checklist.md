# Deployment Checklist: {workflow-name}

## Метаданные

| Параметр | Значение |
|----------|----------|
| Workflow | `{workflow-name}.mdc` |
| Версия | v{X.Y} |
| Трек | Lightweight / Full |
| Дата deployment | {YYYY-MM-DD} |
| Контракт/Scope | {ссылка} |
| Scenario bank | `scenario-bank-{workflow-name}.md` |

---

## Как использовать

- **Full Track:** все блоки обязательны (1–6)
- **Lightweight Track:** обязательны блоки 1, 2, 4 (частично), 6. Остальные — рекомендованы
- Пометка `[LW]` = обязателен для Lightweight
- Каждый пункт: ✅ pass | ❌ fail | ➖ N/A (с обоснованием)

---

## Блок 1: Структура .mdc [LW]

Все обязательные секции .mdc-стандарта присутствуют:

- [ ] **Назначение** — что workflow делает (1–3 предложения)
- [ ] **Версия** — номер версии зафиксирован
- [ ] **Триггеры** — список формулировок, активирующих workflow
- [ ] **Негативные триггеры** — список формулировок, НЕ активирующих workflow (секция «НЕ применять когда»)
- [ ] **Таблица маршрутизации** — «Этап → Режим → Что происходит»
- [ ] **Skill chaining инструкции** — явные указания по переходу между режимами
- [ ] **Шаг 0 (Подготовка)** — memory bank check, проверка контракта/scope
- [ ] **Шаги с SGR-структурой** — каждый шаг содержит «Текущее состояние → Инструкции → Итог шага»
- [ ] **Stop conditions** — когда агент должен остановиться и запросить input
- [ ] **Антипаттерны** — чего НЕ делать (минимум 3)
- [ ] **Self-check / верификация** — финальная проверка перед завершением
- [ ] **Формат результата** — структура выходного артефакта определена

**Результат блока 1:** ______

---

## Блок 2: Маршрутизация [LW]

- [ ] Таблица маршрутизации покрывает ВСЕ этапы workflow
- [ ] Триггеры workflow **не перехватывают** запросы других существующих workflow
- [ ] Негативные триггеры корректно исключают смежные запросы
- [ ] Orchestrator распознаёт триггеры и корректно маршрутизирует (проверено при GREEN-тестировании)
- [ ] Skill chaining инструкции содержат явные переходы: «Переключитесь в {Mode} для {действие}»

**Результат блока 2:** ______

---

## Блок 3: Compatibility (только Full Track)

### 3a. Base Layer (принципы 1–10)

- [ ] Base Layer — workflow не противоречит принципам 1-10 из base layer
- [ ] Если затрагивает принцип 5 (Mandatory Enforcement) — enforcement mechanism определён
- [ ] Если затрагивает принцип 7 (Anti-Rationalization) — контрмеры встроены в workflow

### 3b. Mode Extensions

- [ ] Инструкции workflow не конфликтуют с поведением Ask Mode
- [ ] Инструкции workflow не конфликтуют с поведением Architect Mode (двухшаговый процесс)
- [ ] Инструкции workflow не конфликтуют с пятифазным циклом Code Mode
- [ ] Инструкции workflow не конфликтуют с двухэтапной верификацией Debug Mode
- [ ] Комплаенс-output workflow содержит intern-grade маркировку (принцип 10)
- [ ] WDL-артефакты НЕ содержат intern-grade маркировку (ожидается экспертный тон)

### 3c. Orchestrator Routing

- [ ] Триггеры не конфликтуют с дефолтной маршрутизацией Orchestrator
- [ ] Триггеры не пересекаются с триггерами существующих workflow:
  - [ ] workflow-gifts-hospitality
  - [ ] workflow-donations
  - [ ] workflow-ako-validation
  - [ ] workflow-doc-coauthoring
  - [ ] workflow-ticket-recon
  - [ ] workflow-development (meta-workflow)
  - [ ] {другие, если появились}

### 3d. Platform Constraints

- [ ] Учтено: нет subagents — один агент в одном режиме
- [ ] Учтено: переключение режимов — вручную пользователем
- [ ] Учтено: chat-based взаимодействие (нет API, нет автоматизации)
- [ ] Учтено: alwaysApply rules дают visibility, но не enforcement

### 3e. KB-зависимости

- [ ] Все необходимые KB-файлы перечислены в workflow
- [ ] KB-файлы существуют и доступны
- [ ] Workflow корректно ссылается на KB (путь, формат ссылки)

**Результат блока 3:** ______

---

## Блок 4: Тестирование [LW — частично]

### 4a. Scenario Bank

- [ ] Scenario bank создан: `scenario-bank-{workflow-name}.md`
- [ ] Минимум сценариев соблюдён: Lightweight ≥ 3 / Full ≥ 10
- [ ] Покрыты все типы: positive, negative, edge [+ pressure для Full]

### 4b. RED Baseline [LW]

- [ ] RED-прогон выполнен (сценарии без workflow)
- [ ] Результаты зафиксированы в scenario bank
- [ ] Gaps идентифицированы

### 4c. GREEN Results [LW]

- [ ] GREEN-прогон выполнен (сценарии с workflow)
- [ ] Результаты зафиксированы в scenario bank
- [ ] Gaps из RED закрыты (или задокументированы причины)

### 4d. REFACTOR (только Full Track)

- [ ] Pressure scenarios пройдены
- [ ] Рационализации не обнаружены (или закрыты антипаттернами)
- [ ] Compatibility check финальной версии пройден
- [ ] Минимум 1 полная итерация REFACTOR выполнена
- [ ] Если 3 итерации — accepted risks задокументированы

**Результат блока 4:** ______

---

## Блок 5: Memory Layer (только Full Track)

- [ ] `index.md` — навигация к новому workflow добавлена
- [ ] `definitions.md` — новые термины добавлены (или N/A)
- [ ] `patterns.md` — паттерны, обнаруженные при R&D, зафиксированы (или N/A)
- [ ] `lessons-learned.md` — наблюдения из WDL-цикла зафиксированы (или N/A)

**Результат блока 5:** ______

---

## Блок 6: Финализация [LW]

- [ ] .mdc файл размещён в `.codeassistant/rules/`
- [ ] Scenario bank сохранён в `.codeassistant/scenarios/`
- [ ] Версия workflow зафиксирована в метаданных .mdc
- [ ] Workflow распознаётся Orchestrator (финальная проверка)

**Результат блока 6:** ______

---

## Итоговое решение

| Блок | Результат | Примечание |
|------|-----------|------------|
| 1. Структура .mdc | | |
| 2. Маршрутизация | | |
| 3. Compatibility | | |
| 4. Тестирование | | |
| 5. Memory Layer | | |
| 6. Финализация | | |

**Решение:** ✅ Deploy / ❌ Не готов (причина) / ⚠️ Deploy с accepted risks

**Подтвердил:** {имя/роль}
**Дата:** {YYYY-MM-DD}
